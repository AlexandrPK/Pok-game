{"ast":null,"code":"import firebase from \"firebase/compat/app\";\nimport \"firebase/compat/database\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAbmZeozzXW5uCIJVvYIcA16LjP53cGBJo\",\n  authDomain: \"pokemon-game-ae7f6.firebaseapp.com\",\n  databaseURL: \"https://pokemon-game-ae7f6-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"pokemon-game-ae7f6\",\n  storageBucket: \"pokemon-game-ae7f6.appspot.com\",\n  messagingSenderId: \"550206869022\",\n  appId: \"1:550206869022:web:22af1539388769e285e80f\"\n};\nfirebase.initializeApp(firebaseConfig);\n\nclass Firebase {\n  constructor() {\n    this.GetPokemonSocket = callBack => {\n      this.database.ref(\"pokemons\").on(\"value\", snapshot => {\n        callBack && callBack(snapshot.val());\n      });\n    };\n\n    this.OffPokemonSocket = () => {\n      this.database.ref(\"pokemons\").off();\n    };\n\n    this.GetAllPokemons = async () => {\n      return await this.database.ref(\"pokemons\").once(\"value\").then(snapshot => snapshot.val());\n    };\n\n    this.UpdatePokemonById = (id, update) => {\n      this.database.ref(\"pokemons/\" + id).set(update);\n    };\n\n    this.AddNewPokemon = (pokemon, callback) => {\n      const newKey = this.database.ref().child(\"pokemons\").push().key;\n      this.database.ref(\"pokemons/\" + newKey).set(pokemon).then(() => {\n        callback && callback();\n      });\n    };\n\n    this.AddNewPokemonAPI = async (pokemon, userInfo) => {\n      const data = {\n        method: \"POST\",\n        body: JSON.stringify({ ...pokemon\n        })\n      };\n      await fetch(`${firebaseConfig.databaseURL}/${userInfo.localId}/pokemons.json?auth=${userInfo.idToken}`, data);\n    };\n\n    this.GetAllPokemonsAPI = async localId => {\n      return await fetch(`${firebaseConfig.databaseURL}/${localId}/pokemons.json`).then(res => res.json());\n    };\n\n    this.GetUserInfoAPI = async idToken => {\n      const data = {\n        method: \"POST\",\n        body: JSON.stringify({\n          idToken: idToken\n        })\n      };\n      const response = await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=${firebaseConfig.apiKey}`, data).then(res => res.json());\n      if (response.hasOwnProperty(\"error\")) return false;else {\n        return response.users[0];\n      }\n    };\n\n    this.fire = firebase;\n    this.database = this.fire.database();\n  }\n\n}\n\nconst FirebaseClass = new Firebase();\nexport default FirebaseClass;","map":{"version":3,"sources":["/Users/aleksandr/Desktop/Pok-game — копия/src/Services/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","Firebase","constructor","GetPokemonSocket","callBack","database","ref","on","snapshot","val","OffPokemonSocket","off","GetAllPokemons","once","then","UpdatePokemonById","id","update","set","AddNewPokemon","pokemon","callback","newKey","child","push","key","AddNewPokemonAPI","userInfo","data","method","body","JSON","stringify","fetch","localId","idToken","GetAllPokemonsAPI","res","json","GetUserInfoAPI","response","hasOwnProperty","users","fire","FirebaseClass"],"mappings":"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","sourcesContent":["import firebase from \"firebase/compat/app\";\nimport \"firebase/compat/database\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAbmZeozzXW5uCIJVvYIcA16LjP53cGBJo\",\n  authDomain: \"pokemon-game-ae7f6.firebaseapp.com\",\n  databaseURL:\n    \"https://pokemon-game-ae7f6-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"pokemon-game-ae7f6\",\n  storageBucket: \"pokemon-game-ae7f6.appspot.com\",\n  messagingSenderId: \"550206869022\",\n  appId: \"1:550206869022:web:22af1539388769e285e80f\",\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nclass Firebase {\n  constructor() {\n    this.fire = firebase;\n    this.database = this.fire.database();\n  }\n\n  GetPokemonSocket = (callBack) => {\n    this.database.ref(\"pokemons\").on(\"value\", (snapshot) => {\n      callBack && callBack(snapshot.val());\n    });\n  };\n\n  OffPokemonSocket = () => {\n    this.database.ref(\"pokemons\").off();\n  };\n\n  GetAllPokemons = async () => {\n    return await this.database\n      .ref(\"pokemons\")\n      .once(\"value\")\n      .then((snapshot) => snapshot.val());\n  };\n\n  UpdatePokemonById = (id, update) => {\n    this.database.ref(\"pokemons/\" + id).set(update);\n  };\n\n  AddNewPokemon = (pokemon, callback) => {\n    const newKey = this.database.ref().child(\"pokemons\").push().key;\n    this.database\n      .ref(\"pokemons/\" + newKey)\n      .set(pokemon)\n      .then(() => {\n        callback && callback();\n      });\n  };\n\n  AddNewPokemonAPI = async (pokemon, userInfo) => {\n    const data = {\n      method: \"POST\",\n      body: JSON.stringify({ ...pokemon }),\n    };\n    await fetch(\n      `${firebaseConfig.databaseURL}/${userInfo.localId}/pokemons.json?auth=${userInfo.idToken}`,\n      data\n    );\n  };\n\n  GetAllPokemonsAPI = async (localId) => {\n    return await fetch(\n      `${firebaseConfig.databaseURL}/${localId}/pokemons.json`\n    ).then((res) => res.json());\n  };\n\n  GetUserInfoAPI = async (idToken) => {\n    const data = {\n      method: \"POST\",\n      body: JSON.stringify({\n        idToken: idToken,\n      }),\n    };\n    const response = await fetch(\n      `https://identitytoolkit.googleapis.com/v1/accounts:lookup?key=${firebaseConfig.apiKey}`,\n      data\n    ).then((res) => res.json());\n    if (response.hasOwnProperty(\"error\")) return false;\n    else {\n      return response.users[0];\n    }\n  };\n}\n\nconst FirebaseClass = new Firebase();\n\nexport default FirebaseClass;\n"]},"metadata":{},"sourceType":"module"}